{% load account %}
{% load customfilters %}
{% load cache %}
{% cache 500 header request.user.username request.user.siteuser.is_author %}
<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>{% block title %}Заголовок{% endblock title %}</title>

        <!--Core theme CSS (includes Bootstrap)-->
        {% load static %}
        {% block style %}
            <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
        {% endblock style %}
    </head>

    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="/">Новости и всякое</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link" href="/search">Поиск</a></li>
                        {% if perms.bbw.add_post %}
                        <li class="nav-item"><a class="nav-link" href="/posts/new_news">Добавить новость</a></li>
                        <li class="nav-item"><a class="nav-link" href="/posts/new_article">Добавить статью</a></li>
                        {% endif %}
                        <li class="nav-item"><a class="nav-link" href="/news">Только новости</a></li>
                        <li class="nav-item"><a class="nav-link" href="/articles">Только всякое</a></li>

                        {% if user.is_authenticated %}
                            subscriptions
                            <li class="nav-item bg-info"><a class="nav-link text-black text-bold" href="{% url 'edit_profile' %}">Профиль.</a></li>
                            <li class="nav-item bg-success"><a class="nav-link" href="{% url 'account_logout' %}">Выход ({% user_display user %})</a></li>
                        {% else %}
                            <li class="nav-item bg-success"><a class="nav-link text-black text-bold" href="{% url 'account_login' %}">Вход</a></li>
                            <li class="nav-item bg-info"><a class="nav-link text-black text-bold" href="{% url 'account_signup' %}">Регистрация</a></li>
                        {% endif %}


                    </ul>
                </div>
            </div>
        </nav>

        <!-- Page content-->
       <div class="container">
           <div class="row">
               <div class="col-lg-12 text-center">
                   <h1>{{title}}</h1>
                   {% if user.is_authenticated %}
                        {% if not user|has_group:"author" %}
                            <h3 class="text-danger">Эй, ты! Да-да, ты!</h3>
                            <p class="text-center">Я вижу ты всё ещё не автор! Это срочно нужно исправить.</p>
                            <p class="text-center btn btn-danger"><a class="text-white" href="{% url 'become_author' %}">Жми сюда скорее!</a></p>
                        {% endif %}
                   {% endif %}
               </div>
           </div>

           <div class="row">
{% endcache %}
               {% block content %}
                ......
               {% endblock content %}
{% cache 500 footer %}
           </div>
           <div class="row">
               <div class="col-lg-12 text-center">
                   <hr>
                   <p>&copy; newsandstuff.fm</p>
               </div>
           </div>
        </div>
        <!-- Bootstrap core JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
{% endcache %}